{"ast":null,"code":"/*! @azure/msal-browser v2.22.0 2022-02-08 */\n'use strict';\n\nimport { __awaiter, __generator, __assign, __spread } from '../_virtual/_tslib.js';\nimport { AccountEntity, AuthenticationScheme, ClientConfigurationError, StringUtils, UrlString, ServerTelemetryManager } from '@azure/msal-common';\nimport { version } from '../packageMetadata.js';\nimport { BrowserConstants } from '../utils/BrowserConstants.js';\nimport { BrowserUtils } from '../utils/BrowserUtils.js';\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\n\nvar BaseInteractionClient =\n/** @class */\nfunction () {\n  function BaseInteractionClient(config, storageImpl, browserCrypto, logger, eventHandler, correlationId) {\n    this.config = config;\n    this.browserStorage = storageImpl;\n    this.browserCrypto = browserCrypto;\n    this.networkClient = this.config.system.networkClient;\n    this.eventHandler = eventHandler;\n    this.correlationId = correlationId || this.browserCrypto.createNewGuid();\n    this.logger = logger.clone(BrowserConstants.MSAL_SKU, version, this.correlationId);\n  }\n\n  BaseInteractionClient.prototype.clearCacheOnLogout = function (account) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!account) return [3\n            /*break*/\n            , 5];\n\n            if (AccountEntity.accountInfoIsEqual(account, this.browserStorage.getActiveAccount(), false)) {\n              this.logger.verbose(\"Setting active account to null\");\n              this.browserStorage.setActiveAccount(null);\n            }\n\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , this.browserStorage.removeAccount(AccountEntity.generateAccountCacheKey(account))];\n\n          case 2:\n            _a.sent();\n\n            this.logger.verbose(\"Cleared cache items belonging to the account provided in the logout request.\");\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            _a.sent();\n\n            this.logger.error(\"Account provided in logout request was not found. Local cache unchanged.\");\n            return [3\n            /*break*/\n            , 4];\n\n          case 4:\n            return [3\n            /*break*/\n            , 9];\n\n          case 5:\n            _a.trys.push([5, 8,, 9]); // Clear all accounts and tokens\n\n\n            return [4\n            /*yield*/\n            , this.browserStorage.clear()];\n\n          case 6:\n            // Clear all accounts and tokens\n            _a.sent(); // Clear any stray keys from IndexedDB\n\n\n            return [4\n            /*yield*/\n            , this.browserCrypto.clearKeystore()];\n\n          case 7:\n            // Clear any stray keys from IndexedDB\n            _a.sent();\n\n            this.logger.verbose(\"No account provided in logout request, clearing all cache items.\");\n            return [3\n            /*break*/\n            , 9];\n\n          case 8:\n            _a.sent();\n\n            this.logger.error(\"Attempted to clear all MSAL cache items and failed. Local cache unchanged.\");\n            return [3\n            /*break*/\n            , 9];\n\n          case 9:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n  /**\r\n   * Initializer function for all request APIs\r\n   * @param request\r\n   */\n\n\n  BaseInteractionClient.prototype.initializeBaseRequest = function (request) {\n    return __awaiter(this, void 0, void 0, function () {\n      var authority, scopes, _a, validatedRequest;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            this.logger.verbose(\"Initializing BaseAuthRequest\");\n            authority = request.authority || this.config.auth.authority;\n            scopes = __spread(request && request.scopes || []); // Set authenticationScheme to BEARER if not explicitly set in the request\n\n            if (!request.authenticationScheme) {\n              request.authenticationScheme = AuthenticationScheme.BEARER;\n              this.logger.verbose(\"Authentication Scheme wasn't explicitly set in request, defaulting to \\\"Bearer\\\" request\");\n            } else {\n              if (request.authenticationScheme === AuthenticationScheme.SSH) {\n                if (!request.sshJwk) {\n                  throw ClientConfigurationError.createMissingSshJwkError();\n                }\n\n                if (!request.sshKid) {\n                  throw ClientConfigurationError.createMissingSshKidError();\n                }\n              }\n\n              this.logger.verbose(\"Authentication Scheme set to \\\"\" + request.authenticationScheme + \"\\\" as configured in Auth request\");\n            }\n\n            if (!(request.claims && !StringUtils.isEmpty(request.claims))) return [3\n            /*break*/\n            , 2];\n            _a = request;\n            return [4\n            /*yield*/\n            , this.browserCrypto.hashString(request.claims)];\n\n          case 1:\n            _a.requestedClaimsHash = _b.sent();\n            _b.label = 2;\n\n          case 2:\n            validatedRequest = __assign(__assign({}, request), {\n              correlationId: this.correlationId,\n              authority: authority,\n              scopes: scopes\n            });\n            return [2\n            /*return*/\n            , validatedRequest];\n        }\n      });\n    });\n  };\n  /**\r\n   *\r\n   * Use to get the redirect uri configured in MSAL or null.\r\n   * @param requestRedirectUri\r\n   * @returns Redirect URL\r\n   *\r\n   */\n\n\n  BaseInteractionClient.prototype.getRedirectUri = function (requestRedirectUri) {\n    this.logger.verbose(\"getRedirectUri called\");\n    var redirectUri = requestRedirectUri || this.config.auth.redirectUri || BrowserUtils.getCurrentUri();\n    return UrlString.getAbsoluteUrl(redirectUri, BrowserUtils.getCurrentUri());\n  };\n  /**\r\n   *\r\n   * @param apiId\r\n   * @param correlationId\r\n   * @param forceRefresh\r\n   */\n\n\n  BaseInteractionClient.prototype.initializeServerTelemetryManager = function (apiId, forceRefresh) {\n    this.logger.verbose(\"initializeServerTelemetryManager called\");\n    var telemetryPayload = {\n      clientId: this.config.auth.clientId,\n      correlationId: this.correlationId,\n      apiId: apiId,\n      forceRefresh: forceRefresh || false,\n      wrapperSKU: this.browserStorage.getWrapperMetadata()[0],\n      wrapperVer: this.browserStorage.getWrapperMetadata()[1]\n    };\n    return new ServerTelemetryManager(telemetryPayload, this.browserStorage);\n  };\n\n  return BaseInteractionClient;\n}();\n\nexport { BaseInteractionClient };","map":{"version":3,"mappings":";;;;;;;;AAAA;;;;;;;;AA2BI,iCAAYA,MAAZ,EAA0CC,WAA1C,EAA4EC,aAA5E,EAAoGC,MAApG,EAAoHC,YAApH,EAAgJC,aAAhJ,EAAsK;AAClK,SAAKL,MAAL,GAAcA,MAAd;AACA,SAAKM,cAAL,GAAsBL,WAAtB;AACA,SAAKC,aAAL,GAAqBA,aAArB;AACA,SAAKK,aAAL,GAAqB,KAAKP,MAAL,CAAYQ,MAAZ,CAAmBD,aAAxC;AACA,SAAKH,YAAL,GAAoBA,YAApB;AACA,SAAKC,aAAL,GAAqBA,aAAa,IAAI,KAAKH,aAAL,CAAmBO,aAAnB,EAAtC;AACA,SAAKN,MAAL,GAAcA,MAAM,CAACO,KAAP,CAAaC,gBAAgB,CAACC,QAA9B,EAAwCC,OAAxC,EAAiD,KAAKR,aAAtD,CAAd;AACH;;AAMeS,uDAAhB,UAAmCC,OAAnC,EAA8D;;;;;iBACtDA;AAAA;AAAA;;AACA,gBAAIC,aAAa,CAACC,kBAAd,CAAiCF,OAAjC,EAA0C,KAAKT,cAAL,CAAoBY,gBAApB,EAA1C,EAAkF,KAAlF,CAAJ,EAA8F;AAC1F,mBAAKf,MAAL,CAAYgB,OAAZ,CAAoB,gCAApB;AACA,mBAAKb,cAAL,CAAoBc,gBAApB,CAAqC,IAArC;AACH;;;;;;;AAGG;AAAA;AAAA,cAAM,KAAKd,cAAL,CAAoBe,aAApB,CAAkCL,aAAa,CAACM,uBAAd,CAAsCP,OAAtC,CAAlC,CAAN;;;AAAAQ;;AACA,iBAAKpB,MAAL,CAAYgB,OAAZ,CAAoB,8EAApB;;;;;;;;AAEA,iBAAKhB,MAAL,CAAYqB,KAAZ,CAAkB,0EAAlB;;;;;;;;;;;;;;AAKA;AAAA;AAAA,cAAM,KAAKlB,cAAL,CAAoBmB,KAApB,EAAN;;;;AAAAF;;;AAEA;AAAA;AAAA,cAAM,KAAKrB,aAAL,CAAmBwB,aAAnB,EAAN;;;;AAAAH;;AACA,iBAAKpB,MAAL,CAAYgB,OAAZ,CAAoB,kEAApB;;;;;;;;AAEA,iBAAKhB,MAAL,CAAYqB,KAAZ,CAAkB,4EAAlB;;;;;;;;;;;;AAGX,GAxBe;;;;;;;AA8BAV,0DAAhB,UAAsCa,OAAtC,EAAuE;;;;;;;AACnE,iBAAKxB,MAAL,CAAYgB,OAAZ,CAAoB,8BAApB;AACMS,qBAAS,GAAGD,OAAO,CAACC,SAAR,IAAqB,KAAK5B,MAAL,CAAY6B,IAAZ,CAAiBD,SAAlD;AAEAE,kBAAM,YAASH,OAAO,IAAIA,OAAO,CAACG,MAApB,IAA+B,EAAvC,CAAN;;AAGN,gBAAI,CAACH,OAAO,CAACI,oBAAb,EAAmC;AAC/BJ,qBAAO,CAACI,oBAAR,GAA+BC,oBAAoB,CAACC,MAApD;AACA,mBAAK9B,MAAL,CAAYgB,OAAZ,CAAoB,0FAApB;AACH,aAHD,MAGO;AACH,kBAAIQ,OAAO,CAACI,oBAAR,KAAiCC,oBAAoB,CAACE,GAA1D,EAA+D;AAC3D,oBAAI,CAACP,OAAO,CAACQ,MAAb,EAAqB;AACjB,wBAAMC,wBAAwB,CAACC,wBAAzB,EAAN;AACH;;AACD,oBAAG,CAACV,OAAO,CAACW,MAAZ,EAAoB;AAChB,wBAAMF,wBAAwB,CAACG,wBAAzB,EAAN;AACH;AACJ;;AACD,mBAAKpC,MAAL,CAAYgB,OAAZ,CAAoB,oCAAiCQ,OAAO,CAACI,oBAAzC,GAA6D,kCAAjF;AACH;;kBAGGJ,OAAO,CAACa,MAAR,IAAkB,CAACC,WAAW,CAACC,OAAZ,CAAoBf,OAAO,CAACa,MAA5B,IAAnB;AAAA;AAAA;AACAjB;AAA8B;AAAA;AAAA,cAAM,KAAKrB,aAAL,CAAmByC,UAAnB,CAA8BhB,OAAO,CAACa,MAAtC,CAAN;;;AAA9BjB,eAAQqB,mBAAR,GAA8BC,SAA9B;;;;AAGEC,4BAAgB,yBACfnB,OADe,GACR;AACVtB,2BAAa,EAAE,KAAKA,aADV;AAEVuB,uBAAS,WAFC;AAGVE,oBAAM;AAHI,aADQ,CAAhB;AAON;AAAA;AAAA,cAAOgB,gBAAP;;;;AACH,GAnCe;;;;;;;;;;AA4ChBhC,6DAAeiC,kBAAf,EAA0C;AACtC,SAAK5C,MAAL,CAAYgB,OAAZ,CAAoB,uBAApB;AACA,QAAM6B,WAAW,GAAGD,kBAAkB,IAAI,KAAK/C,MAAL,CAAY6B,IAAZ,CAAiBmB,WAAvC,IAAsDC,YAAY,CAACC,aAAb,EAA1E;AACA,WAAOC,SAAS,CAACC,cAAV,CAAyBJ,WAAzB,EAAsCC,YAAY,CAACC,aAAb,EAAtC,CAAP;AACH,GAJD;;;;;;;;;AAYUpC,qEAAV,UAA2CuC,KAA3C,EAA0DC,YAA1D,EAAgF;AAC5E,SAAKnD,MAAL,CAAYgB,OAAZ,CAAoB,yCAApB;AACA,QAAMoC,gBAAgB,GAA2B;AAC7CC,cAAQ,EAAE,KAAKxD,MAAL,CAAY6B,IAAZ,CAAiB2B,QADkB;AAE7CnD,mBAAa,EAAE,KAAKA,aAFyB;AAG7CgD,WAAK,EAAEA,KAHsC;AAI7CC,kBAAY,EAAEA,YAAY,IAAI,KAJe;AAK7CG,gBAAU,EAAE,KAAKnD,cAAL,CAAoBoD,kBAApB,GAAyC,CAAzC,CALiC;AAM7CC,gBAAU,EAAE,KAAKrD,cAAL,CAAoBoD,kBAApB,GAAyC,CAAzC;AANiC,KAAjD;AASA,WAAO,IAAIE,sBAAJ,CAA2BL,gBAA3B,EAA6C,KAAKjD,cAAlD,CAAP;AACH,GAZS;;AAad;AAAC","names":["config","storageImpl","browserCrypto","logger","eventHandler","correlationId","browserStorage","networkClient","system","createNewGuid","clone","BrowserConstants","MSAL_SKU","version","BaseInteractionClient","account","AccountEntity","accountInfoIsEqual","getActiveAccount","verbose","setActiveAccount","removeAccount","generateAccountCacheKey","_a","error","clear","clearKeystore","request","authority","auth","scopes","authenticationScheme","AuthenticationScheme","BEARER","SSH","sshJwk","ClientConfigurationError","createMissingSshJwkError","sshKid","createMissingSshKidError","claims","StringUtils","isEmpty","hashString","requestedClaimsHash","_b","validatedRequest","requestRedirectUri","redirectUri","BrowserUtils","getCurrentUri","UrlString","getAbsoluteUrl","apiId","forceRefresh","telemetryPayload","clientId","wrapperSKU","getWrapperMetadata","wrapperVer","ServerTelemetryManager"],"sources":["C:\\Users\\empti\\OneDrive\\Desktop\\User_Interface\\user_interface_frontend\\node_modules\\@azure\\msal-browser\\src\\interaction_client\\BaseInteractionClient.ts"],"sourcesContent":["/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { ICrypto, INetworkModule, Logger, AuthenticationResult, AccountInfo, AccountEntity, BaseAuthRequest, AuthenticationScheme, UrlString, ServerTelemetryManager, ServerTelemetryRequest, ClientConfigurationError, StringUtils } from \"@azure/msal-common\";\nimport { BrowserConfiguration } from \"../config/Configuration\";\nimport { BrowserCacheManager } from \"../cache/BrowserCacheManager\";\nimport { EventHandler } from \"../event/EventHandler\";\nimport { EndSessionRequest } from \"../request/EndSessionRequest\";\nimport { RedirectRequest } from \"../request/RedirectRequest\";\nimport { PopupRequest } from \"../request/PopupRequest\";\nimport { SsoSilentRequest } from \"../request/SsoSilentRequest\";\nimport { version } from \"../packageMetadata\";\nimport { BrowserConstants } from \"../utils/BrowserConstants\";\nimport { BrowserUtils } from \"../utils/BrowserUtils\";\n\nexport abstract class BaseInteractionClient {\n\n    protected config: BrowserConfiguration;\n    protected browserStorage: BrowserCacheManager;\n    protected browserCrypto: ICrypto;\n    protected networkClient: INetworkModule;\n    protected logger: Logger;\n    protected eventHandler: EventHandler;\n    protected correlationId: string;\n\n    constructor(config: BrowserConfiguration, storageImpl: BrowserCacheManager, browserCrypto: ICrypto, logger: Logger, eventHandler: EventHandler, correlationId?: string) {\n        this.config = config;\n        this.browserStorage = storageImpl;\n        this.browserCrypto = browserCrypto;\n        this.networkClient = this.config.system.networkClient;\n        this.eventHandler = eventHandler;\n        this.correlationId = correlationId || this.browserCrypto.createNewGuid();\n        this.logger = logger.clone(BrowserConstants.MSAL_SKU, version, this.correlationId);\n    }\n\n    abstract acquireToken(request: RedirectRequest|PopupRequest|SsoSilentRequest): Promise<AuthenticationResult|void>;\n\n    abstract logout(request: EndSessionRequest): Promise<void>;\n\n    protected async clearCacheOnLogout(account?: AccountInfo| null): Promise<void> {\n        if (account) {\n            if (AccountEntity.accountInfoIsEqual(account, this.browserStorage.getActiveAccount(), false)) {\n                this.logger.verbose(\"Setting active account to null\");\n                this.browserStorage.setActiveAccount(null);\n            }\n            // Clear given account.\n            try {\n                await this.browserStorage.removeAccount(AccountEntity.generateAccountCacheKey(account));\n                this.logger.verbose(\"Cleared cache items belonging to the account provided in the logout request.\");\n            } catch (error) {\n                this.logger.error(\"Account provided in logout request was not found. Local cache unchanged.\");\n            }\n        } else {\n            try {\n                // Clear all accounts and tokens\n                await this.browserStorage.clear();\n                // Clear any stray keys from IndexedDB\n                await this.browserCrypto.clearKeystore();\n                this.logger.verbose(\"No account provided in logout request, clearing all cache items.\");\n            } catch(e) {\n                this.logger.error(\"Attempted to clear all MSAL cache items and failed. Local cache unchanged.\");\n            }\n        }\n    }\n\n    /**\n     * Initializer function for all request APIs\n     * @param request\n     */\n    protected async initializeBaseRequest(request: Partial<BaseAuthRequest>): Promise<BaseAuthRequest> {\n        this.logger.verbose(\"Initializing BaseAuthRequest\");\n        const authority = request.authority || this.config.auth.authority;\n\n        const scopes = [...((request && request.scopes) || [])];\n\n        // Set authenticationScheme to BEARER if not explicitly set in the request\n        if (!request.authenticationScheme) {\n            request.authenticationScheme = AuthenticationScheme.BEARER;\n            this.logger.verbose(\"Authentication Scheme wasn't explicitly set in request, defaulting to \\\"Bearer\\\" request\");\n        } else {\n            if (request.authenticationScheme === AuthenticationScheme.SSH) {\n                if (!request.sshJwk) {\n                    throw ClientConfigurationError.createMissingSshJwkError();\n                }\n                if(!request.sshKid) {\n                    throw ClientConfigurationError.createMissingSshKidError();\n                }\n            }\n            this.logger.verbose(`Authentication Scheme set to \"${request.authenticationScheme}\" as configured in Auth request`);\n        }\n\n        // Set requested claims hash if claims were requested\n        if (request.claims && !StringUtils.isEmpty(request.claims)) {\n            request.requestedClaimsHash = await this.browserCrypto.hashString(request.claims);\n        } \n\n        const validatedRequest: BaseAuthRequest = {\n            ...request,\n            correlationId: this.correlationId,\n            authority,\n            scopes\n        };\n\n        return validatedRequest;\n    }\n\n    /**\n     *\n     * Use to get the redirect uri configured in MSAL or null.\n     * @param requestRedirectUri\n     * @returns Redirect URL\n     *\n     */\n    getRedirectUri(requestRedirectUri?: string): string {\n        this.logger.verbose(\"getRedirectUri called\");\n        const redirectUri = requestRedirectUri || this.config.auth.redirectUri || BrowserUtils.getCurrentUri();\n        return UrlString.getAbsoluteUrl(redirectUri, BrowserUtils.getCurrentUri());\n    }\n\n    /**\n     *\n     * @param apiId\n     * @param correlationId\n     * @param forceRefresh\n     */\n    protected initializeServerTelemetryManager(apiId: number, forceRefresh?: boolean): ServerTelemetryManager {\n        this.logger.verbose(\"initializeServerTelemetryManager called\");\n        const telemetryPayload: ServerTelemetryRequest = {\n            clientId: this.config.auth.clientId,\n            correlationId: this.correlationId,\n            apiId: apiId,\n            forceRefresh: forceRefresh || false,\n            wrapperSKU: this.browserStorage.getWrapperMetadata()[0],\n            wrapperVer: this.browserStorage.getWrapperMetadata()[1]\n        };\n\n        return new ServerTelemetryManager(telemetryPayload, this.browserStorage);\n    }\n}\n"]},"metadata":{},"sourceType":"module"}